/*!
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.dev/license
 */
import { Component, DestroyRef, ElementRef, EventEmitter, NgZone, Output, QueryList, ViewChild, ViewChildren, inject, } from '@angular/core';
import { WINDOW } from '../../providers/index';
import { ClickOutside } from '../../directives/index';
import { Search } from '../../services/index';
import { TextField } from '../text-field/text-field.component';
import { FormsModule } from '@angular/forms';
import { ActiveDescendantKeyManager } from '@angular/cdk/a11y';
import { SearchItem } from '../../directives/search-item/search-item.directive';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import { Router, RouterLink } from '@angular/router';
import { filter, fromEvent } from 'rxjs';
import { AlgoliaIcon } from '../algolia-icon/algolia-icon.component';
import { RelativeLink } from '../../pipes/relative-link.pipe';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
export class SearchDialog {
    constructor() {
        this.onClose = new EventEmitter();
        this.destroyRef = inject(DestroyRef);
        this.ngZone = inject(NgZone);
        this.search = inject(Search);
        this.relativeLink = new RelativeLink();
        this.router = inject(Router);
        this.window = inject(WINDOW);
        this.searchQuery = this.search.searchQuery;
        this.searchResults = this.search.searchResults;
    }
    ngOnInit() {
        this.ngZone.runOutsideAngular(() => {
            fromEvent(this.window, 'keydown')
                .pipe(filter((_) => !!this.keyManager), takeUntilDestroyed(this.destroyRef))
                .subscribe((event) => {
                // When user presses Enter we can navigate to currently selected item in the search result list.
                if (event.key === 'Enter') {
                    this.navigateToTheActiveItem();
                }
                else {
                    this.ngZone.run(() => {
                        this.keyManager?.onKeydown(event);
                    });
                }
            });
        });
    }
    ngAfterViewInit() {
        this.dialog?.nativeElement.showModal?.();
        if (!this.items) {
            return;
        }
        this.keyManager = new ActiveDescendantKeyManager(this.items).withWrap();
        this.keyManager?.setFirstItemActive();
        this.updateActiveItemWhenResultsChanged();
        this.scrollToActiveItem();
    }
    ngOnDestroy() {
        this.keyManager?.destroy();
    }
    closeSearchDialog() {
        this.dialog?.nativeElement.close();
        this.onClose.next();
    }
    updateSearchQuery(query) {
        this.search.updateSearchQuery(query);
    }
    updateActiveItemWhenResultsChanged() {
        this.items?.changes.pipe(takeUntilDestroyed(this.destroyRef)).subscribe(() => {
            // Change detection should be run before execute `setFirstItemActive`.
            Promise.resolve().then(() => {
                this.keyManager?.setFirstItemActive();
            });
        });
    }
    navigateToTheActiveItem() {
        const activeItemLink = this.keyManager?.activeItem?.item?.url;
        if (!activeItemLink) {
            return;
        }
        this.router.navigateByUrl(this.relativeLink.transform(activeItemLink));
        this.onClose.next();
    }
    scrollToActiveItem() {
        this.keyManager?.change.pipe(takeUntilDestroyed(this.destroyRef)).subscribe(() => {
            this.keyManager?.activeItem?.scrollIntoView();
        });
    }
}
SearchDialog.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.1.0-next.1", ngImport: i0, type: SearchDialog, deps: [], target: i0.ɵɵFactoryTarget.Component });
SearchDialog.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.1.0-next.1", type: SearchDialog, isStandalone: true, selector: "docs-search-dialog", outputs: { onClose: "onClose" }, viewQueries: [{ propertyName: "dialog", first: true, predicate: ["searchDialog"], descendants: true }, { propertyName: "items", predicate: SearchItem, descendants: true }], ngImport: i0, template: "<dialog #searchDialog>\n  <div class=\"adev-search-container\" (docsClickOutside)=\"closeSearchDialog()\">\n    <docs-text-field\n      [autofocus]=\"true\"\n      [hideIcon]=\"true\"\n      [ngModel]=\"searchQuery()\"\n      (ngModelChange)=\"updateSearchQuery($event)\"\n      class=\"adev-search-input\"\n      placeholder=\"Search docs\"\n    ></docs-text-field>\n\n    @if (searchResults() && searchResults()!.length > 0) {\n    <ul class=\"adev-search-results adev-mini-scroll-track\">\n      @for (result of searchResults(); track result.objectID) {\n      <li docsSearchItem [item]=\"result\">\n        @if (result.url) {\n          <a [routerLink]=\"'/' + result.url | relativeLink: 'pathname'\" [fragment]=\"result.url | relativeLink: 'hash'\">\n            <div>\n              <div class=\"adev-result-icon-and-type\">\n                <!-- Icon -->\n                <span class=\"adev-search-result-icon\" aria-hidden=\"true\">\n                  @if (result.hierarchy?.lvl0 === 'Docs') {\n                  <i role=\"presentation\" class=\"material-symbols-outlined docs-icon-small\">\n                    description\n                  </i>\n                  } @else if (result.hierarchy?.lvl0 === 'Tutorials') {\n                  <i role=\"presentation\" class=\"material-symbols-outlined docs-icon-small\">code</i>\n                  } @else if (result.hierarchy?.lvl0 === 'Reference') {\n                  <i role=\"presentation\" class=\"material-symbols-outlined docs-icon-small\">\n                    description\n                  </i>\n                  }\n                </span>\n                <!-- Results type -->\n                <span class=\"adev-search-results__type\">{{ result.hierarchy?.lvl1 }}</span>\n              </div>\n\n              <!-- Hide level 2 if level 3 exists -->\n              <!-- Level 2 -->\n              @if (result.hierarchy?.lvl2 && !result.hierarchy?.lvl3) {\n              <span class=\"adev-search-results__type adev-search-results__lvl2\">\n                {{ result.hierarchy?.lvl2 }}\n              </span>\n              }\n              <!-- Level 3 -->\n              @if (result.hierarchy?.lvl3) {\n              <span class=\"adev-search-results__type adev-search-results__lvl3\">\n                {{ result.hierarchy?.lvl3 }}\n              </span>\n              }\n            </div>\n\n            <!-- Page title -->\n            <span class=\"adev-result-page-title\">{{ result.hierarchy?.lvl0 }}</span>\n          </a>\n        }\n      </li>\n      }\n    </ul>\n    } @else {\n    <div class=\"adev-search-results adev-mini-scroll-track\">\n      @if (searchResults() === undefined) {\n      <div class=\"adev-search-results__no-results\">\n        <span>Start typing to see results</span>\n      </div>\n      } @else if (searchResults()?.length === 0) {\n      <div class=\"adev-search-results__no-results\">\n        <span>No results found</span>\n      </div>\n      }\n    </div>\n    }\n\n    <div class=\"adev-algolia\">\n      <span>Search by</span>\n      <docs-algolia-icon />\n    </div>\n  </div>\n</dialog>\n", styles: ["dialog{background-color:rgba(0,0,0,0);border:none;padding-block-end:3rem}dialog::backdrop{backdrop-filter:blur(5px)}.adev-search-container{width:500px;max-width:90vw;background-color:var(--page-background);border:1px solid var(--senary-contrast);border-radius:.25rem;box-sizing:border-box}.adev-search-container .adev-search-input{border-radius:.25rem .25rem 0 0;border:none;border-block-end:1px solid var(--senary-contrast);height:2.6875rem;padding-inline-start:1rem;position:relative}.adev-search-container .adev-search-input::after{content:\"Esc\";position:absolute;right:1rem;color:var(--gray-400);font-size:.875rem}.adev-search-container ul{max-height:260px;overflow-y:auto;list-style-type:none;padding-inline:0;padding-block-start:1rem;margin:0}.adev-search-container ul li{border-inline-start:2px solid var(--senary-contrast);margin-inline-start:1rem;padding-inline-end:1rem;padding-block:.25rem}.adev-search-container ul li a{color:var(--secondary-contrast);display:flex;justify-content:space-between;gap:.5rem}.adev-search-container ul li a .adev-search-result-icon i{display:flex;align-items:center;font-size:1.2rem}.adev-search-container ul li.active{background-color:var(--septenary-contrast)}.adev-search-container ul li:hover,.adev-search-container ul li.active{background-color:var(--octonary-contrast);border-inline-start:2px solid var(--primary-contrast)}.adev-search-container ul li:hover a span:not(.adev-result-page-title),.adev-search-container ul li:hover a .adev-search-results__type,.adev-search-container ul li.active a span:not(.adev-result-page-title),.adev-search-container ul li.active a .adev-search-results__type{color:var(--primary-contrast)}.adev-search-container ul li:hover a span:not(.adev-result-page-title) i,.adev-search-container ul li:hover a .adev-search-results__type i,.adev-search-container ul li.active a span:not(.adev-result-page-title) i,.adev-search-container ul li.active a .adev-search-results__type i{color:var(--primary-contrast)}.adev-search-container ul .adev-search-result-icon,.adev-search-container ul .adev-search-results__type,.adev-search-container ul .adev-result-page-title{color:var(--quaternary-contrast);display:inline-block;font-size:.875rem;transition:color .3s ease;padding:.75rem;padding-inline-end:0}.adev-search-container ul .adev-search-results__lvl2{display:inline-block;margin-inline-start:2rem;padding-block-start:0}.adev-search-container ul .adev-search-results__lvl3{margin-inline-start:2rem;padding-block-start:0}.adev-search-container .adev-result-page-title{font-size:.875rem;font-weight:400}.adev-search-results__no-results{padding:.75rem;color:var(--gray-400)}.adev-result-icon-and-type{display:flex}.adev-result-icon-and-type .adev-search-results__type{padding-inline-start:0}.adev-algolia{display:flex;align-items:center;justify-content:end;color:var(--gray-400);padding:1rem;font-size:.75rem;font-weight:500;gap:.25rem;background-color:var(--page-background);border-radius:0 0 .25rem .25rem}.adev-algolia docs-algolia-icon{margin-block-start:.12rem;margin-inline-start:.15rem;width:4rem}/*# sourceMappingURL=search-dialog.component.css.map */\n"], dependencies: [{ kind: "directive", type: ClickOutside, selector: "[docsClickOutside]", inputs: ["docsClickOutsideIgnore"], outputs: ["docsClickOutside"] }, { kind: "component", type: TextField, selector: "docs-text-field", inputs: ["name", "placeholder", "disabled", "hideIcon", "autofocus"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "directive", type: SearchItem, selector: "[docsSearchItem]", inputs: ["item", "disabled"] }, { kind: "component", type: AlgoliaIcon, selector: "docs-algolia-icon" }, { kind: "pipe", type: RelativeLink, name: "relativeLink" }, { kind: "directive", type: RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.1.0-next.1", ngImport: i0, type: SearchDialog, decorators: [{
            type: Component,
            args: [{ selector: 'docs-search-dialog', standalone: true, imports: [
                        ClickOutside,
                        TextField,
                        FormsModule,
                        SearchItem,
                        AlgoliaIcon,
                        RelativeLink,
                        RouterLink,
                    ], template: "<dialog #searchDialog>\n  <div class=\"adev-search-container\" (docsClickOutside)=\"closeSearchDialog()\">\n    <docs-text-field\n      [autofocus]=\"true\"\n      [hideIcon]=\"true\"\n      [ngModel]=\"searchQuery()\"\n      (ngModelChange)=\"updateSearchQuery($event)\"\n      class=\"adev-search-input\"\n      placeholder=\"Search docs\"\n    ></docs-text-field>\n\n    @if (searchResults() && searchResults()!.length > 0) {\n    <ul class=\"adev-search-results adev-mini-scroll-track\">\n      @for (result of searchResults(); track result.objectID) {\n      <li docsSearchItem [item]=\"result\">\n        @if (result.url) {\n          <a [routerLink]=\"'/' + result.url | relativeLink: 'pathname'\" [fragment]=\"result.url | relativeLink: 'hash'\">\n            <div>\n              <div class=\"adev-result-icon-and-type\">\n                <!-- Icon -->\n                <span class=\"adev-search-result-icon\" aria-hidden=\"true\">\n                  @if (result.hierarchy?.lvl0 === 'Docs') {\n                  <i role=\"presentation\" class=\"material-symbols-outlined docs-icon-small\">\n                    description\n                  </i>\n                  } @else if (result.hierarchy?.lvl0 === 'Tutorials') {\n                  <i role=\"presentation\" class=\"material-symbols-outlined docs-icon-small\">code</i>\n                  } @else if (result.hierarchy?.lvl0 === 'Reference') {\n                  <i role=\"presentation\" class=\"material-symbols-outlined docs-icon-small\">\n                    description\n                  </i>\n                  }\n                </span>\n                <!-- Results type -->\n                <span class=\"adev-search-results__type\">{{ result.hierarchy?.lvl1 }}</span>\n              </div>\n\n              <!-- Hide level 2 if level 3 exists -->\n              <!-- Level 2 -->\n              @if (result.hierarchy?.lvl2 && !result.hierarchy?.lvl3) {\n              <span class=\"adev-search-results__type adev-search-results__lvl2\">\n                {{ result.hierarchy?.lvl2 }}\n              </span>\n              }\n              <!-- Level 3 -->\n              @if (result.hierarchy?.lvl3) {\n              <span class=\"adev-search-results__type adev-search-results__lvl3\">\n                {{ result.hierarchy?.lvl3 }}\n              </span>\n              }\n            </div>\n\n            <!-- Page title -->\n            <span class=\"adev-result-page-title\">{{ result.hierarchy?.lvl0 }}</span>\n          </a>\n        }\n      </li>\n      }\n    </ul>\n    } @else {\n    <div class=\"adev-search-results adev-mini-scroll-track\">\n      @if (searchResults() === undefined) {\n      <div class=\"adev-search-results__no-results\">\n        <span>Start typing to see results</span>\n      </div>\n      } @else if (searchResults()?.length === 0) {\n      <div class=\"adev-search-results__no-results\">\n        <span>No results found</span>\n      </div>\n      }\n    </div>\n    }\n\n    <div class=\"adev-algolia\">\n      <span>Search by</span>\n      <docs-algolia-icon />\n    </div>\n  </div>\n</dialog>\n", styles: ["dialog{background-color:rgba(0,0,0,0);border:none;padding-block-end:3rem}dialog::backdrop{backdrop-filter:blur(5px)}.adev-search-container{width:500px;max-width:90vw;background-color:var(--page-background);border:1px solid var(--senary-contrast);border-radius:.25rem;box-sizing:border-box}.adev-search-container .adev-search-input{border-radius:.25rem .25rem 0 0;border:none;border-block-end:1px solid var(--senary-contrast);height:2.6875rem;padding-inline-start:1rem;position:relative}.adev-search-container .adev-search-input::after{content:\"Esc\";position:absolute;right:1rem;color:var(--gray-400);font-size:.875rem}.adev-search-container ul{max-height:260px;overflow-y:auto;list-style-type:none;padding-inline:0;padding-block-start:1rem;margin:0}.adev-search-container ul li{border-inline-start:2px solid var(--senary-contrast);margin-inline-start:1rem;padding-inline-end:1rem;padding-block:.25rem}.adev-search-container ul li a{color:var(--secondary-contrast);display:flex;justify-content:space-between;gap:.5rem}.adev-search-container ul li a .adev-search-result-icon i{display:flex;align-items:center;font-size:1.2rem}.adev-search-container ul li.active{background-color:var(--septenary-contrast)}.adev-search-container ul li:hover,.adev-search-container ul li.active{background-color:var(--octonary-contrast);border-inline-start:2px solid var(--primary-contrast)}.adev-search-container ul li:hover a span:not(.adev-result-page-title),.adev-search-container ul li:hover a .adev-search-results__type,.adev-search-container ul li.active a span:not(.adev-result-page-title),.adev-search-container ul li.active a .adev-search-results__type{color:var(--primary-contrast)}.adev-search-container ul li:hover a span:not(.adev-result-page-title) i,.adev-search-container ul li:hover a .adev-search-results__type i,.adev-search-container ul li.active a span:not(.adev-result-page-title) i,.adev-search-container ul li.active a .adev-search-results__type i{color:var(--primary-contrast)}.adev-search-container ul .adev-search-result-icon,.adev-search-container ul .adev-search-results__type,.adev-search-container ul .adev-result-page-title{color:var(--quaternary-contrast);display:inline-block;font-size:.875rem;transition:color .3s ease;padding:.75rem;padding-inline-end:0}.adev-search-container ul .adev-search-results__lvl2{display:inline-block;margin-inline-start:2rem;padding-block-start:0}.adev-search-container ul .adev-search-results__lvl3{margin-inline-start:2rem;padding-block-start:0}.adev-search-container .adev-result-page-title{font-size:.875rem;font-weight:400}.adev-search-results__no-results{padding:.75rem;color:var(--gray-400)}.adev-result-icon-and-type{display:flex}.adev-result-icon-and-type .adev-search-results__type{padding-inline-start:0}.adev-algolia{display:flex;align-items:center;justify-content:end;color:var(--gray-400);padding:1rem;font-size:.75rem;font-weight:500;gap:.25rem;background-color:var(--page-background);border-radius:0 0 .25rem .25rem}.adev-algolia docs-algolia-icon{margin-block-start:.12rem;margin-inline-start:.15rem;width:4rem}/*# sourceMappingURL=search-dialog.component.css.map */\n"] }]
        }], propDecorators: { onClose: [{
                type: Output
            }], dialog: [{
                type: ViewChild,
                args: ['searchDialog']
            }], items: [{
                type: ViewChildren,
                args: [SearchItem]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoLWRpYWxvZy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9kb2NzL2NvbXBvbmVudHMvc2VhcmNoLWRpYWxvZy9zZWFyY2gtZGlhbG9nLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL2RvY3MvY29tcG9uZW50cy9zZWFyY2gtZGlhbG9nL3NlYXJjaC1kaWFsb2cuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztHQU1HO0FBRUgsT0FBTyxFQUVMLFNBQVMsRUFDVCxVQUFVLEVBQ1YsVUFBVSxFQUNWLFlBQVksRUFDWixNQUFNLEVBR04sTUFBTSxFQUNOLFNBQVMsRUFDVCxTQUFTLEVBQ1QsWUFBWSxFQUNaLE1BQU0sR0FDUCxNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUMsTUFBTSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFDN0MsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBQ3BELE9BQU8sRUFBQyxNQUFNLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQztBQUU1QyxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDN0QsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQzNDLE9BQU8sRUFBQywwQkFBMEIsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQzdELE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxvREFBb0QsQ0FBQztBQUM5RSxPQUFPLEVBQUMsa0JBQWtCLEVBQUMsTUFBTSw0QkFBNEIsQ0FBQztBQUM5RCxPQUFPLEVBQUMsTUFBTSxFQUFFLFVBQVUsRUFBQyxNQUFNLGlCQUFpQixDQUFDO0FBQ25ELE9BQU8sRUFBQyxNQUFNLEVBQUUsU0FBUyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQ3ZDLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSx3Q0FBd0MsQ0FBQztBQUNu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QUFZO3VCQUFDLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5kZXYvbGljZW5zZVxuICovXG5cbmltcG9ydCB7XG4gIEFmdGVyVmlld0luaXQsXG4gIENvbXBvbmVudCxcbiAgRGVzdHJveVJlZixcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBOZ1pvbmUsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFF1ZXJ5TGlzdCxcbiAgVmlld0NoaWxkLFxuICBWaWV3Q2hpbGRyZW4sXG4gIGluamVjdCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7V0lORE9XfSBmcm9tICcuLi8uLi9wcm92aWRlcnMvaW5kZXgnO1xuaW1wb3J0IHtDbGlja091dHNpZGV9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvaW5kZXgnO1xuaW1wb3J0IHtTZWFyY2h9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2luZGV4JztcblxuaW1wb3J0IHtUZXh0RmllbGR9IGZyb20gJy4uL3RleHQtZmllbGQvdGV4dC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHtGb3Jtc01vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHtBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlcn0gZnJvbSAnQGFuZ3VsYXIvY2RrL2ExMXknO1xuaW1wb3J0IHtTZWFyY2hJdGVtfSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL3NlYXJjaC1pdGVtL3NlYXJjaC1pdGVtLmRpcmVjdGl2ZSc7XG5pbXBvcnQge3Rha2VVbnRpbERlc3Ryb3llZH0gZnJvbSAnQGFuZ3VsYXIvY29yZS9yeGpzLWludGVyb3AnO1xuaW1wb3J0IHtSb3V0ZXIsIFJvdXRlckxpbmt9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQge2ZpbHRlciwgZnJvbUV2ZW50fSBmcm9tICdyeGpzJztcbmltcG9ydCB7QWxnb2xpYUljb259IGZyb20gJy4uL2FsZ29saWEtaWNvbi9hbGdvbGlhLWljb24uY29tcG9uZW50JztcbmltcG9ydCB7UmVsYXRpdmVMaW5rfSBmcm9tICcuLi8uLi9waXBlcy9yZWxhdGl2ZS1saW5rLnBpcGUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkb2NzLXNlYXJjaC1kaWFsb2cnLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbXG4gICAgQ2xpY2tPdXRzaWRlLFxuICAgIFRleHRGaWVsZCxcbiAgICBGb3Jtc01vZHVsZSxcbiAgICBTZWFyY2hJdGVtLFxuICAgIEFsZ29saWFJY29uLFxuICAgIFJlbGF0aXZlTGluayxcbiAgICBSb3V0ZXJMaW5rLFxuICBdLFxuICB0ZW1wbGF0ZVVybDogJy4vc2VhcmNoLWRpYWxvZy5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3NlYXJjaC1kaWFsb2cuY29tcG9uZW50LnNjc3MnXSxcbn0pXG5leHBvcnQgY2xhc3MgU2VhcmNoRGlhbG9nIGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xuICBAT3V0cHV0KCkgb25DbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgQFZpZXdDaGlsZCgnc2VhcmNoRGlhbG9nJykgZGlhbG9nPzogRWxlbWVudFJlZjxIVE1MRGlhbG9nRWxlbWVudD47XG4gIEBWaWV3Q2hpbGRyZW4oU2VhcmNoSXRlbSkgaXRlbXM/OiBRdWVyeUxpc3Q8U2VhcmNoSXRlbT47XG5cbiAgcHJpdmF0ZSByZWFkb25seSBkZXN0cm95UmVmID0gaW5qZWN0KERlc3Ryb3lSZWYpO1xuICBwcml2YXRlIHJlYWRvbmx5IG5nWm9uZSA9IGluamVjdChOZ1pvbmUpO1xuICBwcml2YXRlIHJlYWRvbmx5IHNlYXJjaCA9IGluamVjdChTZWFyY2gpO1xuICBwcml2YXRlIHJlYWRvbmx5IHJlbGF0aXZlTGluayA9IG5ldyBSZWxhdGl2ZUxpbmsoKTtcbiAgcHJpdmF0ZSByZWFkb25seSByb3V0ZXIgPSBpbmplY3QoUm91dGVyKTtcbiAgcHJpdmF0ZSByZWFkb25seSB3aW5kb3cgPSBpbmplY3QoV0lORE9XKTtcblxuICBwcml2YXRlIGtleU1hbmFnZXI/OiBBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlcjxTZWFyY2hJdGVtPjtcblxuICBzZWFyY2hRdWVyeSA9IHRoaXMuc2VhcmNoLnNlYXJjaFF1ZXJ5O1xuICBzZWFyY2hSZXN1bHRzID0gdGhpcy5zZWFyY2guc2VhcmNoUmVzdWx0cztcblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICBmcm9tRXZlbnQ8S2V5Ym9hcmRFdmVudD4odGhpcy53aW5kb3csICdrZXlkb3duJylcbiAgICAgICAgLnBpcGUoXG4gICAgICAgICAgZmlsdGVyKChfKSA9PiAhIXRoaXMua2V5TWFuYWdlciksXG4gICAgICAgICAgdGFrZVVudGlsRGVzdHJveWVkKHRoaXMuZGVzdHJveVJlZiksXG4gICAgICAgIClcbiAgICAgICAgLnN1YnNjcmliZSgoZXZlbnQpID0+IHtcbiAgICAgICAgICAvLyBXaGVuIHVzZXIgcHJlc3NlcyBFbnRlciB3ZSBjYW4gbmF2aWdhdGUgdG8gY3VycmVudGx5IHNlbGVjdGVkIGl0ZW0gaW4gdGhlIHNlYXJjaCByZXN1bHQgbGlzdC5cbiAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRlVG9UaGVBY3RpdmVJdGVtKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMua2V5TWFuYWdlcj8ub25LZXlkb3duKGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5kaWFsb2c/Lm5hdGl2ZUVsZW1lbnQuc2hvd01vZGFsPy4oKTtcblxuICAgIGlmICghdGhpcy5pdGVtcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMua2V5TWFuYWdlciA9IG5ldyBBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlcih0aGlzLml0ZW1zKS53aXRoV3JhcCgpO1xuICAgIHRoaXMua2V5TWFuYWdlcj8uc2V0Rmlyc3RJdGVtQWN0aXZlKCk7XG5cbiAgICB0aGlzLnVwZGF0ZUFjdGl2ZUl0ZW1XaGVuUmVzdWx0c0NoYW5nZWQoKTtcbiAgICB0aGlzLnNjcm9sbFRvQWN0aXZlSXRlbSgpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5rZXlNYW5hZ2VyPy5kZXN0cm95KCk7XG4gIH1cblxuICBjbG9zZVNlYXJjaERpYWxvZygpIHtcbiAgICB0aGlzLmRpYWxvZz8ubmF0aXZlRWxlbWVudC5jbG9zZSgpO1xuICAgIHRoaXMub25DbG9zZS5uZXh0KCk7XG4gIH1cblxuICB1cGRhdGVTZWFyY2hRdWVyeShxdWVyeTogc3RyaW5nKSB7XG4gICAgdGhpcy5zZWFyY2gudXBkYXRlU2VhcmNoUXVlcnkocXVlcnkpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVBY3RpdmVJdGVtV2hlblJlc3VsdHNDaGFuZ2VkKCk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXM/LmNoYW5nZXMucGlwZSh0YWtlVW50aWxEZXN0cm95ZWQodGhpcy5kZXN0cm95UmVmKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIC8vIENoYW5nZSBkZXRlY3Rpb24gc2hvdWxkIGJlIHJ1biBiZWZvcmUgZXhlY3V0ZSBgc2V0Rmlyc3RJdGVtQWN0aXZlYC5cbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLmtleU1hbmFnZXI/LnNldEZpcnN0SXRlbUFjdGl2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIG5hdmlnYXRlVG9UaGVBY3RpdmVJdGVtKCk6IHZvaWQge1xuICAgIGNvbnN0IGFjdGl2ZUl0ZW1MaW5rOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmtleU1hbmFnZXI/LmFjdGl2ZUl0ZW0/Lml0ZW0/LnVybDtcblxuICAgIGlmICghYWN0aXZlSXRlbUxpbmspIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZUJ5VXJsKHRoaXMucmVsYXRpdmVMaW5rLnRyYW5zZm9ybShhY3RpdmVJdGVtTGluaykpO1xuICAgIHRoaXMub25DbG9zZS5uZXh0KCk7XG4gIH1cblxuICBwcml2YXRlIHNjcm9sbFRvQWN0aXZlSXRlbSgpOiB2b2lkIHtcbiAgICB0aGlzLmtleU1hbmFnZXI/LmNoYW5nZS5waXBlKHRha2VVbnRpbERlc3Ryb3llZCh0aGlzLmRlc3Ryb3lSZWYpKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5rZXlNYW5hZ2VyPy5hY3RpdmVJdGVtPy5zY3JvbGxJbnRvVmlldygpO1xuICAgIH0pO1xuICB9XG59XG4iLCI8ZGlhbG9nICNzZWFyY2hEaWFsb2c+XG4gIDxkaXYgY2xhc3M9XCJhZGV2LXNlYXJjaC1jb250YWluZXJcIiAoZG9jc0NsaWNrT3V0c2lkZSk9XCJjbG9zZVNlYXJjaERpYWxvZygpXCI+XG4gICAgPGRvY3MtdGV4dC1maWVsZFxuICAgICAgW2F1dG9mb2N1c109XCJ0cnVlXCJcbiAgICAgIFtoaWRlSWNvbl09XCJ0cnVlXCJcbiAgICAgIFtuZ01vZGVsXT1cInNlYXJjaFF1ZXJ5KClcIlxuICAgICAgKG5nTW9kZWxDaGFuZ2UpPVwidXBkYXRlU2VhcmNoUXVlcnkoJGV2ZW50KVwiXG4gICAgICBjbGFzcz1cImFkZXYtc2VhcmNoLWlucHV0XCJcbiAgICAgIHBsYWNlaG9sZGVyPVwiU2VhcmNoIGRvY3NcIlxuICAgID48L2RvY3MtdGV4dC1maWVsZD5cblxuICAgIEBpZiAoc2VhcmNoUmVzdWx0cygpICYmIHNlYXJjaFJlc3VsdHMoKSEubGVuZ3RoID4gMCkge1xuICAgIDx1bCBjbGFzcz1cImFkZXYtc2VhcmNoLXJlc3VsdHMgYWRldi1taW5pLXNjcm9sbC10cmFja1wiPlxuICAgICAgQGZvciAocmVzdWx0IG9mIHNlYXJjaFJlc3VsdHMoKTsgdHJhY2sgcmVzdWx0Lm9iamVjdElEKSB7XG4gICAgICA8bGkgZG9jc1NlYXJjaEl0ZW0gW2l0ZW1dPVwicmVzdWx0XCI+XG4gICAgICAgIEBpZiAocmVzdWx0LnVybCkge1xuICAgICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cIicvJyArIHJlc3VsdC51cmwgfCByZWxhdGl2ZUxpbms6ICdwYXRobmFtZSdcIiBbZnJhZ21lbnRdPVwicmVzdWx0LnVybCB8IHJlbGF0aXZlTGluazogJ2hhc2gnXCI+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWRldi1yZXN1bHQtaWNvbi1hbmQtdHlwZVwiPlxuICAgICAgICAgICAgICAgIDwhLS0gSWNvbiAtLT5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImFkZXYtc2VhcmNoLXJlc3VsdC1pY29uXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgICAgICAgICAgICAgICBAaWYgKHJlc3VsdC5oaWVyYXJjaHk/Lmx2bDAgPT09ICdEb2NzJykge1xuICAgICAgICAgICAgICAgICAgPGkgcm9sZT1cInByZXNlbnRhdGlvblwiIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCBkb2NzLWljb24tc21hbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgIDwvaT5cbiAgICAgICAgICAgICAgICAgIH0gQGVsc2UgaWYgKHJlc3VsdC5oaWVyYXJjaHk/Lmx2bDAgPT09ICdUdXRvcmlhbHMnKSB7XG4gICAgICAgICAgICAgICAgICA8aSByb2xlPVwicHJlc2VudGF0aW9uXCIgY2xhc3M9XCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkIGRvY3MtaWNvbi1zbWFsbFwiPmNvZGU8L2k+XG4gICAgICAgICAgICAgICAgICB9IEBlbHNlIGlmIChyZXN1bHQuaGllcmFyY2h5Py5sdmwwID09PSAnUmVmZXJlbmNlJykge1xuICAgICAgICAgICAgICAgICAgPGkgcm9sZT1cInByZXNlbnRhdGlvblwiIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCBkb2NzLWljb24tc21hbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgIDwvaT5cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPCEtLSBSZXN1bHRzIHR5cGUgLS0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJhZGV2LXNlYXJjaC1yZXN1bHRzX190eXBlXCI+e3sgcmVzdWx0LmhpZXJhcmNoeT8ubHZsMSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPCEtLSBIaWRlIGxldmVsIDIgaWYgbGV2ZWwgMyBleGlzdHMgLS0+XG4gICAgICAgICAgICAgIDwhLS0gTGV2ZWwgMiAtLT5cbiAgICAgICAgICAgICAgQGlmIChyZXN1bHQuaGllcmFyY2h5Py5sdmwyICYmICFyZXN1bHQuaGllcmFyY2h5Py5sdmwzKSB7XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYWRldi1zZWFyY2gtcmVzdWx0c19fdHlwZSBhZGV2LXNlYXJjaC1yZXN1bHRzX19sdmwyXCI+XG4gICAgICAgICAgICAgICAge3sgcmVzdWx0LmhpZXJhcmNoeT8ubHZsMiB9fVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgPCEtLSBMZXZlbCAzIC0tPlxuICAgICAgICAgICAgICBAaWYgKHJlc3VsdC5oaWVyYXJjaHk/Lmx2bDMpIHtcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJhZGV2LXNlYXJjaC1yZXN1bHRzX190eXBlIGFkZXYtc2VhcmNoLXJlc3VsdHNfX2x2bDNcIj5cbiAgICAgICAgICAgICAgICB7eyByZXN1bHQuaGllcmFyY2h5Py5sdmwzIH19XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwhLS0gUGFnZSB0aXRsZSAtLT5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYWRldi1yZXN1bHQtcGFnZS10aXRsZVwiPnt7IHJlc3VsdC5oaWVyYXJjaHk/Lmx2bDAgfX08L3NwYW4+XG4gICAgICAgICAgPC9hPlxuICAgICAgICB9XG4gICAgICA8L2xpPlxuICAgICAgfVxuICAgIDwvdWw+XG4gICAgfSBAZWxzZSB7XG4gICAgPGRpdiBjbGFzcz1cImFkZXYtc2VhcmNoLXJlc3VsdHMgYWRldi1taW5pLXNjcm9sbC10cmFja1wiPlxuICAgICAgQGlmIChzZWFyY2hSZXN1bHRzKCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgPGRpdiBjbGFzcz1cImFkZXYtc2VhcmNoLXJlc3VsdHNfX25vLXJlc3VsdHNcIj5cbiAgICAgICAgPHNwYW4+U3RhcnQgdHlwaW5nIHRvIHNlZSByZXN1bHRzPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgICB9IEBlbHNlIGlmIChzZWFyY2hSZXN1bHRzKCk/Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgPGRpdiBjbGFzcz1cImFkZXYtc2VhcmNoLXJlc3VsdHNfX25vLXJlc3VsdHNcIj5cbiAgICAgICAgPHNwYW4+Tm8gcmVzdWx0cyBmb3VuZDwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICAgfVxuICAgIDwvZGl2PlxuICAgIH1cblxuICAgIDxkaXYgY2xhc3M9XCJhZGV2LWFsZ29saWFcIj5cbiAgICAgIDxzcGFuPlNlYXJjaCBieTwvc3Bhbj5cbiAgICAgIDxkb2NzLWFsZ29saWEtaWNvbiAvPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGlhbG9nPlxuIl19