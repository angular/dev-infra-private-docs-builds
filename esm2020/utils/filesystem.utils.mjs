/*!
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.dev/license
 */
import { normalizePath } from './navigation.utils';
export const checkFilesInDirectory = async (dir, fs, filterFoldersPredicate = () => true, files = []) => {
    const entries = (await fs.readdir(dir, { withFileTypes: true })) ?? [];
    for (const entry of entries) {
        const fullPath = normalizePath(`${dir}/${entry.name}`);
        if (entry.isFile()) {
            const content = await fs.readFile(fullPath, 'utf-8');
            files.push({ content, path: fullPath });
        }
        else if (entry.isDirectory() && filterFoldersPredicate(entry.name)) {
            await checkFilesInDirectory(fullPath, fs, filterFoldersPredicate, files);
        }
    }
    return files;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZXN5c3RlbS51dGlscy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2RvY3MvdXRpbHMvZmlsZXN5c3RlbS51dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0dBTUc7QUFFSCxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFvQmpELE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLEtBQUssRUFDeEMsR0FBVyxFQUNYLEVBQWlCLEVBQ2pCLHlCQUFxRCxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQy9ELFFBQTBCLEVBQUUsRUFDNUIsRUFBRTtJQUNGLE1BQU0sT0FBTyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxFQUFDLGFBQWEsRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0lBRXJFLEtBQUssTUFBTSxLQUFLLElBQUksT0FBTyxFQUFFLENBQUM7UUFDNUIsTUFBTSxRQUFRLEdBQUcsYUFBYSxDQUFDLEdBQUcsR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBRXZELElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUM7WUFDbkIsTUFBTSxPQUFPLEdBQUcsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUNyRCxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUMsQ0FBQyxDQUFDO1FBQ3hDLENBQUM7YUFBTSxJQUFJLEtBQUssQ0FBQyxXQUFXLEVBQUUsSUFBSSxzQkFBc0IsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUNyRSxNQUFNLHFCQUFxQixDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsc0JBQXNCLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDM0UsQ0FBQztJQUNILENBQUM7SUFFRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmRldi9saWNlbnNlXG4gKi9cblxuaW1wb3J0IHtub3JtYWxpemVQYXRofSBmcm9tICcuL25hdmlnYXRpb24udXRpbHMnO1xuaW1wb3J0IHtGaWxlQW5kQ29udGVudH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5cbmludGVyZmFjZSBEaXJFbnQ8VD4ge1xuICBuYW1lOiBUO1xuICBpc0ZpbGUoKTogYm9vbGVhbjtcbiAgaXNEaXJlY3RvcnkoKTogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIEZpbGVTeXN0ZW1BUEkge1xuICByZWFkZGlyKFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBvcHRpb25zOiB7XG4gICAgICBlbmNvZGluZz86IEJ1ZmZlckVuY29kaW5nIHwgbnVsbDtcbiAgICAgIHdpdGhGaWxlVHlwZXM6IHRydWU7XG4gICAgfSxcbiAgKTogUHJvbWlzZTxEaXJFbnQ8c3RyaW5nPltdPjtcbiAgcmVhZEZpbGUocGF0aDogc3RyaW5nLCBlbmNvZGluZz86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPjtcbn1cblxuZXhwb3J0IGNvbnN0IGNoZWNrRmlsZXNJbkRpcmVjdG9yeSA9IGFzeW5jIChcbiAgZGlyOiBzdHJpbmcsXG4gIGZzOiBGaWxlU3lzdGVtQVBJLFxuICBmaWx0ZXJGb2xkZXJzUHJlZGljYXRlOiAocGF0aD86IHN0cmluZykgPT4gYm9vbGVhbiA9ICgpID0+IHRydWUsXG4gIGZpbGVzOiBGaWxlQW5kQ29udGVudFtdID0gW10sXG4pID0+IHtcbiAgY29uc3QgZW50cmllcyA9IChhd2FpdCBmcy5yZWFkZGlyKGRpciwge3dpdGhGaWxlVHlwZXM6IHRydWV9KSkgPz8gW107XG5cbiAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke2Rpcn0vJHtlbnRyeS5uYW1lfWApO1xuXG4gICAgaWYgKGVudHJ5LmlzRmlsZSgpKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUoZnVsbFBhdGgsICd1dGYtOCcpO1xuICAgICAgZmlsZXMucHVzaCh7Y29udGVudCwgcGF0aDogZnVsbFBhdGh9KTtcbiAgICB9IGVsc2UgaWYgKGVudHJ5LmlzRGlyZWN0b3J5KCkgJiYgZmlsdGVyRm9sZGVyc1ByZWRpY2F0ZShlbnRyeS5uYW1lKSkge1xuICAgICAgYXdhaXQgY2hlY2tGaWxlc0luRGlyZWN0b3J5KGZ1bGxQYXRoLCBmcywgZmlsdGVyRm9sZGVyc1ByZWRpY2F0ZSwgZmlsZXMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmaWxlcztcbn07XG4iXX0=